<img src="./image_8.4%20%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8%E8%B0%83%E5%BA%A6%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E5%8F%8D%E8%BD%AC/image-20231117174452086.png" alt="image-20231117174452086" style="zoom:80%;" />



**优先级反转**

![image-20231117180049796](./image_8.4%20%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8%E8%B0%83%E5%BA%A6%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E5%8F%8D%E8%BD%AC/image-20231117180049796.png)

T1 优先级最高，T3优先级最低；蓝色表示，T1和T3需要访问共享资源；

在t1，T3任务执行，并访问共享资源；此时t3时刻，T1无法执行，需要等待T3释放共享资源

在t5时，T2任务可以抢占T3，而T1无法抢占T3，导致T2优先级反而比T1高了，那么在T2执行的这段时间，称为不可控时间，若T2时间较长，系统发现T1未被执行，可能会认为发送了故障要重启。

**解决办法**

因为T3和T1访问共享资源，那么把T3优先级提升至T1，则T2无法抢占T3，也就无法比T1先执行

<img src="./image_8.4%20%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8%E8%B0%83%E5%BA%A6%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E5%8F%8D%E8%BD%AC/image-20231117180436748.png" alt="image-20231117180436748" style="zoom:80%;" />

**另一种办法**

<img src="./image_8.4%20%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8%E8%B0%83%E5%BA%A6%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E5%8F%8D%E8%BD%AC/image-20231117180555746.png" alt="image-20231117180555746" style="zoom:80%;" />

定义了资源优先级；一旦进程占用了这些资源，进程的优先级则被提升至资源优先级，防止被抢占